process CaloTest  = {

	service = MessageLogger	{
		untracked vstring destinations = {"cout"} 
		untracked vstring categories = { "HcalSim", "ValidHcal" }

		untracked PSet cout = { 
			untracked PSet default   = { untracked int32 limit = 0}
			untracked PSet HcalSim   = { untracked int32 limit =-1}
			untracked PSet ValidHcal = { untracked int32 limit =-1}
		}
	}

	include "SimGeneral/HepPDTESSource/data/pythiapdt.cfi"

	untracked PSet maxEvents = {untracked int32 input = 1000}
	source = FlatRandomEGunSource
	{
 		untracked uint32 firstRun  = 1
		untracked PSet PGunParameters =
		{
			# you can request more than 1 particle
			untracked vint32 PartID = {13}
			untracked double MinEta =  2.95
			untracked double MaxEta =  3.30
			untracked double MinPhi = -3.1415926
			untracked double MaxPhi =  3.1415926
			untracked double MinE   =  99.99
			untracked double MaxE   = 100.01
		}
		untracked int32 Verbosity = 0 
		untracked bool  AddAntiParticle = false
	}

        service = Timing {}

	service = RandomNumberGeneratorService {
		untracked uint32 sourceSeed = 135799753
		PSet moduleSeeds = {
			untracked uint32 VtxSmeared = 123456789
			untracked uint32 g4SimHits = 9876
		}
	}

	include "IOMC/EventVertexGenerators/data/VtxSmearedGauss.cfi"

	#Magnetic Field 		
	include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

	#Geometry
	include "SimG4CMS/Calo/test/data/testGeometryPMTXML.cfi"

	#Magnetic Field
	include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

	include "Configuration/EventContent/data/EventContent.cff"
	module USER = PoolOutputModule {
		using FEVTSIMEventContent
		untracked string fileName ="simevent_HFPMT.root"
	} 
	
	include "SimG4Core/Application/data/g4SimHits.cfi"
	replace g4SimHits.Physics.type = "SimG4Core/Physics/QGSP"
	replace g4SimHits.Physics.DefaultCutValue = 0.1
	replace g4SimHits.HCalSD.UseShowerLibrary = false
	replace g4SimHits.HCalSD.UseParametrize   = true
	replace g4SimHits.HCalSD.UsePMTHits       = true
	replace g4SimHits.Watchers = {
                    {string type                   = "SimG4HcalValidation"
                     PSet SimG4HcalValidation = {
                        int32   InfoLevel       = 2
                        bool    HcalClusterOnly = false
                        bool    HcalSampling    = true
                        double  ConeSize        = 0.5
                        double  EcalHitThreshold= 1e-20
                        double  HcalHitThreshold= 1e-20
                        double  TimeLowLimit    = 0.
                        double  TimeUpLimit     = 999.
                        double  JetThreshold    = 5.0
                        double  Eta0            = 0.3045
                        double  Phi0            = 0.3054
                        vstring Names           = {"HcalHits", "EcalHitsEB",
                                                   "EcalHitsEE", "EcalHitsES"}
			untracked string LabelLayerInfo = "HcalInfoLayer"
			untracked string LabelNxNInfo   = "HcalInfoNxN"
			untracked string LabelJetsInfo  = "HcalInfoJets"
                        }
                    }
                }


	path p1 = { VtxSmeared, g4SimHits}
	endpath outpath = { USER }

}		
