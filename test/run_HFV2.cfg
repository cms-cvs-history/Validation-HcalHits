process CaloTest  = {
	service = MessageLogger	{
		untracked vstring destinations = {"cout"} 
		untracked vstring categories = { "HFShower", "HcalSim", "CaloSim", "G4cout", "G4cerr", "ValidHcal" }
		untracked PSet cout = {
			untracked PSet default = { untracked int32 limit  =0}
			untracked PSet HFShower = { untracked int32 limit =-1}
			untracked PSet HcalSim  = { untracked int32 limit =0} 
			untracked PSet CaloSim  = { untracked int32 limit =0} 
			untracked PSet G4cout   = { untracked int32 limit =0} 
			untracked PSet G4cerr   = { untracked int32 limit =0} 
			untracked PSet ValidHcal= { untracked int32 limit =0} 
		}
	}
        service = Timing {}
	service = RandomNumberGeneratorService {
		untracked uint32 sourceSeed = 135799753
		PSet moduleSeeds = {
			untracked uint32 VtxSmeared = 123456789
		        untracked uint32 g4SimHits = 9876
		}
	}
  include "SimGeneral/HepPDTESSource/data/pythiapdt.cfi"
  untracked PSet maxEvents = {untracked int32 input = 1}
  source = FlatRandomEGunSource {
      untracked uint32 firstRun  = 1
      untracked PSet  PGunParameters = {
         # you can request more than 1 particle
 	 untracked vint32 PartID = {11}
         //untracked double MinEta = 3.0
         //untracked double MaxEta = 4.5
	 untracked double MinEta = 3.070
         untracked double MaxEta = 3.071
         //untracked double MinPhi = -3.14159265358979323846  # it must be in radians
	 //untracked double MinPhi =0
         //untracked double MaxPhi =  3.14159265358979323846
	 //untracked double MaxPhi = 1.57  
	 untracked double MinPhi =0.0872
         untracked double MaxPhi =0.0873
         untracked double MinE   = 99.9
         untracked double MaxE   = 100.1
      }
   }
	include "IOMC/EventVertexGenerators/data/VtxSmearedGauss.cfi"
	replace VtxSmeared.SigmaX = 0.00001
	replace VtxSmeared.SigmaY = 0.00001
	replace VtxSmeared.SigmaZ = 0.00001
	#Magnetic Field 		
        include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
	#Geometry
	include "Validation/HcalHits/data/testGeometryPMTXML.cfi"
        # Calo geometry service model
        include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"
        include "Geometry/CaloEventSetup/data/CaloTopology.cfi"


  	module USER = PoolOutputModule {untracked string fileName ="100_pi_bs.root"} 
	include "SimG4Core/Application/data/g4SimHits.cfi"
	replace g4SimHits.UseMagneticField = false
	replace g4SimHits.Physics.type = "SimG4Core/Physics/QGSP_EMV"
	replace g4SimHits.HCalSD.UseParametrize = true
	replace g4SimHits.HCalSD.UsePMTHits = true
	replace g4SimHits.HCalSD.BetaThreshold    = 0.70
	replace g4SimHits.HFShower.TrackEM        = true
	replace g4SimHits.G4Commands = {"/physics_engine/neutron/energyLimit 0 keV",
					"/physics_engine/neutron/timeLimit 0.01 ms"}
	replace g4SimHits.Watchers = {
                    {string type              = "SimG4HcalValidation"
                     PSet SimG4HcalValidation = {
                        int32   InfoLevel       = 2
                        bool    HcalClusterOnly = false
                        bool    HcalSampling    = true
                        double  ConeSize        = 0.5
                        double  EcalHitThreshold= 1e-20
                        double  HcalHitThreshold= 1e-20
                        double  TimeLowLimit    = 0.
                        double  TimeUpLimit     = 999.
                        double  JetThreshold    = 5.0
                        double  Eta0            = 0.3045
                        double  Phi0            = 0.3054
                        vstring Names           = {"HcalHits", "EcalHitsEB",
                                                    "EcalHitsEE", "EcalHitsES"}
			untracked string LabelLayerInfo = "HcalInfoLayer"
			untracked string LabelNxNInfo   = "HcalInfoNxN"
			untracked string LabelJetsInfo  = "HcalInfoJets"
                        }
                    }
                }
	service = DQMStore {
		untracked string referenceFileName = ""
		untracked int32 verbose = 0
		}
	service = DQM {
		untracked string collectorHost = ""
		untracked int32  collectorPort = 9090
		untracked double publishFrequency = 5
		untracked bool   debug = false
		}

	include "Validation/HcalHits/data/HcalHitValidation.cfi"
	replace hcalHitValid.OutputFile    = "100_pi_bs_plots.root"

	path p1 = { VtxSmeared, g4SimHits, hcalHitValid }
	endpath outpath = { USER }
}
